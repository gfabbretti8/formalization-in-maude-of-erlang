mod SYSTEM is including BOOL . protecting SEM_ENTITY . sorts Entities . subsort Entity < Entities . op #empty-entities : -> Entities [ctor] . op _||_ : Entities Entities -> Entities [assoc comm id: #empty-entities prec 9 ctor] . op `[_`]_ : Qid Entities -> Entities [prec 7 ctor] . eq S:Subst nil = nil . eq S:Subst(! a:Chan(x:Qid). P:Proc) = !(S:Subst a:Chan)(x:Qid).[lift x:Qid S:Subst]P:Proc . eq S:Subst(P1:Proc + P2:Proc) = S:Subst P1:Proc + S:Subst P2:Proc . eq S:Subst(tau . P:Proc) = tau . S:Subst P:Proc . eq S:Subst(a:Chan < b:Chan > . P:Proc) = (S:Subst a:Chan)< S:Subst b:Chan > . S:Subst P:Proc . eq S:Subst(a:Chan(x:Qid). P:Proc) = (S:Subst a:Chan)(x:Qid).[lift x:Qid S:Subst]P:Proc . eq S:Subst([x:Qid]P:Proc) = [x:Qid][lift x:Qid S:Subst]P:Proc . eq [x:Qid]nil = nil . ceq nil + P:Proc = P:Proc if P:Proc =/= nil = true . ceq S:Subst(P1:Proc || P2:Proc) = S:Subst P1:Proc || S:Subst P2:Proc if P1:Proc =/= nil and P2:Proc =/= nil = true . ceq P2:Proc ||[x:Qid]P1:Proc = [x:Qid](P1:Proc ||[shift x:Qid]P2:Proc) if P1:Proc =/= nil and P2:Proc =/= nil = true . ceq [x:Qid][y:Qid]P:Proc = [y:Qid][x:Qid]P:Proc if string(y:Qid)< string(x:Qid)= true . endm 